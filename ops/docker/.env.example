# Siddes Docker Dev (.env.example)
# Copy to .env:
#   cp ops/docker/.env.example ops/docker/.env
# Then:
#   docker compose -f ops/docker/docker-compose.dev.yml up --build

# --- Ports ---
SIDDES_FRONTEND_PORT=3000
SIDDES_BACKEND_PORT=8000
POSTGRES_PORT=5432

# --- Postgres (dev defaults) ---
POSTGRES_DB=siddes
POSTGRES_USER=siddes
POSTGRES_PASSWORD=siddes_dev_password
DATABASE_URL=postgres://siddes:siddes_dev_password@db:5432/siddes

# --- Redis ---
REDIS_URL=redis://redis:6379/0

# --- Django ---
DJANGO_DEBUG=1

# --- Frontend API base variables ---
# Browser -> backend (host machine)
NEXT_PUBLIC_API_BASE=http://localhost:${SIDDES_BACKEND_PORT}
# Frontend container -> backend container
SD_INTERNAL_API_BASE=http://backend:8000

# --- Inbox store toggles (sd_124) ---
# Options:
#   - db     : DB-backed inbox (default)
#   - memory : in-memory seeded inbox (dev-only; requires DJANGO_DEBUG=1 and SIDDES_ALLOW_MEMORY_STORES=1)
#   - auto   : try DB if reachable + migrated, otherwise fallback to memory
SD_INBOX_STORE=db
# Example: SD_INBOX_STORE=auto

# Dev-only: allow memory inbox stores
SIDDES_ALLOW_MEMORY_STORES=0

# Optional: when using memory store, shadow-write into DB best-effort (sd_121d)
SD_INBOX_DUALWRITE_DB=0

# --- Feature flags ---
# Broadcasts are disabled by default (MVP)
SIDDES_BROADCASTS_ENABLED=0
